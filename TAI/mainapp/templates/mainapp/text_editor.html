{% extends 'mainapp/base.html' %}
{% block title %}Text Editor{% endblock %}
{% block extra_head %}
    <script src="https://unpkg.com/typo-js@1.2.4/typo.js"></script>
{% endblock %}
{% block content %}
<div class="content-container">
    <!-- Left Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-top">
            <button class="sidebar-button" id="updateFileBtn" onclick="updateFromFile()" title="Update from File">
                <img class="icon" src="{% static 'media/server-solid.svg' %}" alt="img"><span class="button-text">Update from DB</span>
            </button>
            <button class="sidebar-button" id="shareBtn" onclick="shareText()" title="Share">
                <img class="icon" src="{% static 'media/share-solid.svg' %}" alt="img"><span class="button-text">Share</span>
            </button>
            <button class="sidebar-button" id="saveBtn" onclick="saveText()" title="Save">
                <img class="icon" src="{% static 'media/floppy-disk-solid.svg' %}" alt="img"><span class="button-text">Save to DB</span>
            </button>
            <button class="sidebar-button" id="addCollaboratorBtn" onclick="addCollaborator()" title="Add Collaborator">
                <img class="icon" src="{% static 'media/user-plus-solid.svg' %}" alt="img"><span class="button-text">Add Collaborator</span>
            </button>
        </div>
        <div class="sidebar-bottom">
            <h3>Recent Activity</h3>
            <div id="activityLog"></div>
        </div>
    </aside>

    <!-- Editor Section -->
    <div class="editor-section">
        <!-- Top Bars (Token Bar and Toolbar) -->
        <div class="top-bars">
            <div class="token-bar">
                <span id="availableTokens">Available Tokens: 1000</span>
                <span id="usedTokens">Used Tokens: 0</span>
                <span id="lastSaved">Last Saved: Apr 27, 2025</span>
            </div>
            <div class="toolbar">
                <button id="spellCheckBtn" onclick="checkSpelling()">Check Spelling</button>
                <button id="showWrongBtn" onclick="toggleWrongWords()" style="display: none;">Show Wrong Words</button>
                <button id="showCorrectedBtn" onclick="toggleCorrected()" style="display: none;">Show Corrected</button>
                <button id="updateBtn" onclick="showUpdateConfirmation()" style="display: none;">Update</button>
                <div id="confirmationButtons" style="display: none;">
                    <button id="confirmUpdateBtn" onclick="confirmUpdate()">Confirm</button>
                    <button id="cancelUpdateBtn" onclick="cancelUpdate()">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Editor Area -->
        <div class="editor-area">
            <div class="textarea-container">
                <label class="textarea-title">Text Title</label>
                <textarea id="editor" placeholder="Type your text here..."></textarea>
            </div>
            <div class="textarea-container">
                <label class="textarea-title">AI Response</label>
                <textarea id="correctionsArea" readonly></textarea>
            </div>
        </div>
    </div>
</div>

<!-- Bottom Bar (Diff Area) -->
<div class="bottom-bar" id="diffArea" style="display: none;"></div>
{% endblock %}
{% block extra_scripts %}
    <script src="{% static 'js/fileJS.js' %}"></script>
{% endblock %}
